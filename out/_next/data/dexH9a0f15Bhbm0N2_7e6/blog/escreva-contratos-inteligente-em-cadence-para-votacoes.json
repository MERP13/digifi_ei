{"pageProps":{"page":{"__metadata":{"id":"content/pages/blog/escreva-contratos-inteligente-em-cadence-para-votacoes.md","source":"sourcebit-source-filesystem","sourceName":"pages","sourcePath":"/Users/coflow/Desktop/digifi_ei/content/pages","relSourcePath":"blog/escreva-contratos-inteligente-em-cadence-para-votacoes.md","relProjectPath":"content/pages/blog/escreva-contratos-inteligente-em-cadence-para-votacoes.md","urlPath":"/blog/escreva-contratos-inteligente-em-cadence-para-votacoes","pageCssClasses":["page-blog","page-blog-escreva-contratos-inteligente-em-cadence-para-votacoes"]},"layout":"PostLayout","metaTitle":"Escreva Contratos Inteligente em Cadence Para Votações","addTitleSuffix":true,"metaTags":[],"title":"Escreva Contratos Inteligente em Cadence Para Votações","colors":"colors-d","date":"2022-12-12","excerpt":"O smart contract em Cadence é um código que é executado em uma rede blockchain, que é uma tecnologia de banco de dados descentralizada. Ele é utilizado para realizar eleições de forma segura e eficiente, permitindo que os participantes votem em uma das propostas disponíveis e armazenando as contagens de votos para cada uma das propostas. O smart contract possui três recursos principais: MaioriaGanha, Voto e Administrar. O recurso MaioriaGanha é o contrato principal e define as variáveis propostas e votos, bem como as funções processar e init. O recurso Voto permite que os participantes votem em uma das propostas e armazenem suas escolhas em uma variável escolha. O recurso Administrar permite que o administrador inicialize as propostas e crie novas instâncias do recurso Voto.","featuredImage":{"type":"ImageBlock","url":"/images/capas/Escreva Contratos Inteligente em Cadence Para Votações diegofornalha.png","altText":"Escreva Contratos Inteligente em Cadence Para Votações","caption":"O smart contract em Cadence é um código que é executado em uma rede blockchain, que é uma tecnologia de banco de dados descentralizada. Ele é utilizado para realizar eleições de forma segura e eficiente, permitindo que os participantes votem em uma das propostas disponíveis e armazenando as contagens de votos para cada uma das propostas. O smart contract possui três recursos principais: MaioriaGanha, Voto e Administrar. O recurso MaioriaGanha é o contrato principal e define as variáveis propostas e votos, bem como as funções processar e init. O recurso Voto permite que os participantes votem em uma das propostas e armazenem suas escolhas em uma variável escolha. O recurso Administrar permite que o administrador inicialize as propostas e crie novas instâncias do recurso Voto.","width":800,"height":450},"media":{"type":"ImageBlock","url":"/images/capas/Escreva Contratos Inteligente em Cadence Para Votações diegofornalha.png","altText":"Escreva Contratos Inteligente em Cadence Para Votações","caption":"O smart contract em Cadence é um código que é executado em uma rede blockchain, que é uma tecnologia de banco de dados descentralizada. Ele é utilizado para realizar eleições de forma segura e eficiente, permitindo que os participantes votem em uma das propostas disponíveis e armazenando as contagens de votos para cada uma das propostas. O smart contract possui três recursos principais: MaioriaGanha, Voto e Administrar. O recurso MaioriaGanha é o contrato principal e define as variáveis propostas e votos, bem como as funções processar e init. O recurso Voto permite que os participantes votem em uma das propostas e armazenem suas escolhas em uma variável escolha. O recurso Administrar permite que o administrador inicialize as propostas e crie novas instâncias do recurso Voto.","width":800,"height":450},"bottomSections":[],"metaDescription":"O smart contract em Cadence é um código que é executado em uma rede blockchain, que é uma tecnologia de banco de dados descentralizada. Ele é utilizado para realizar eleições de forma segura e eficiente, permitindo que os participantes votem em uma das propostas disponíveis e armazenando as contagens de votos para cada uma das propostas. O smart contract possui três recursos principais: MaioriaGanha, Voto e Administrar. O recurso MaioriaGanha é o contrato principal e define as variáveis propostas e votos, bem como as funções processar e init. O recurso Voto permite que os participantes votem em uma das propostas e armazenem suas escolhas em uma variável escolha. O recurso Administrar permite que o administrador inicialize as propostas e crie novas instâncias do recurso Voto.","socialImage":"/images/capas/Escreva Contratos Inteligente em Cadence Para Votações diegofornalha.png","author":null,"markdown_content":"Hoje nós vamos ver como é fácil programar seu primeiro smart contract em Cadence de votação, ele sem dúvidas é o verdadeiro mestre das eleições!\n\nEle permite que os participantes votem em uma das propostas disponíveis e armazena as contagens de votos para cada uma das propostas.\n\nEle possui três recursos principais:\n\nMaioriaGanha,\n\nVoto e\n\nAdministrar.\n\nCom esses recursos, o smart contract em Cadence é capaz de realizar eleições de forma eficiente e segura.\n\nO recurso MaioriaGanha é o contrato principal e define as variáveis propostas e votos, bem como as funções processar e init.\n\nA variável propostas é uma lista de strings que armazena as propostas disponíveis para votação, enquanto a variável votos é um dicionário que armazena a contagem de votos para cada uma das propostas.\n\nA função processar é usada para processar um voto quando um participante decide finalizá-lo, enquanto a função init é chamada quando o contrato é criado e inicializa as variáveis propostas e votos com valores vazios e salva uma instância do recurso Administrar na storage do contrato.\n\nO recurso Voto é usado para permitir que os participantes votem em uma das propostas e armazenar suas escolhas em uma variável escolha.\n\nQuando uma nova instância do recurso Voto é criada, a função init é chamada para inicializar a variável escolha com um dicionário vazio e preencher o dicionário com as propostas disponíveis. O participante pode chamar a função vote para votar em uma das propostas, passando o índice da proposta como argumento.\n\nO recurso Administrar permite que o administrador inicialize as propostas e crie novas instâncias do recurso Voto. A função inicializePropostas é usada para atribuir a lista de propostas fornecida à variável propostas do contrato principal e inicializar a variável votos com um dicionário vazio, com chaves correspondentes a cada uma das propostas.\n\nA função emitirVoto é usada para criar uma nova instância do recurso Voto e retorná-la.\n\nEspero que isso tenha ajudado a esclarecer o que o seu smart contract está fazendo de forma mais detalhada e descontraída. Se você tiver mais perguntas ou precisar de mais assistência, não hesite em perguntar.\npub contract MaioriaGanha {\n    pub var propostas: [String]\n    pub let votos: {Int: Int}\n\n    pub resource Voto {\n        pub let propostas: [String]\n        pub var escolha: {Int: Bool}\n\n        init() {\n            self.propostas = MaioriaGanha.propostas\n            self.escolha = {}\n            var i = 0\n            while i < self.propostas.length {\n                self.escolha[i] = false\n                i = i + 1\n            }\n        }\n        pub fun vote(propostas: Int) {\n            pre {\n                propostas >= 0\n                propostas < self.propostas.length\n            }\n            self.escolha[propostas] = true\n        }\n    }\n\n    pub resource Administrar {\n        pub fun inicializePropostas(_ propostas: [String]) {\n            pre {\n                MaioriaGanha.propostas.length == 0\n                propostas.length > 0\n            }\n            MaioriaGanha.propostas = propostas\n\n            var i = 0\n            while i < propostas.length {\n                MaioriaGanha.votos[i] = 0\n                i = i + 1\n            }\n        }\n\n        pub fun emitirVoto(): @Voto {\n            return <-create Voto()\n        }\n    }\n\n    pub fun processar(voto: @Voto) {\n        var index = 0\n        while index < self.propostas.length {\n            if voto.escolha[index]! {\n                self.votos[index] = self.votos[index]! + 1\n            }\n            index = index + 1;\n        }\n        destroy voto\n    }\n    init() {\n        self.propostas = []\n        self.votos = {}\n\n        self.account.save<@Administrar>(<-create Administrar(), to: /storage/CalcularVotos)\n    }\n}\nParece que o seu código em Cadence é uma transação que permite ao administrador inicializar uma lista de propostas para eventos. Quando a transação é executada, ela solicita ao administrador que forneça suas credenciais de autenticação e, em seguida, usa essas credenciais para obter uma referência para o recurso Administrar do contrato MaioriaGanha.\n\nEm seguida, a função inicializePropostas é chamada no recurso Administrar, passando uma lista de três cidades como argumento: Rio de Janeiro, São Paulo e Floripa.\n\nEssa função atribui a lista de propostas fornecida à variável propostas do contrato principal e inicializa a variável votos com um dicionário vazio, com chaves correspondentes a cada uma das propostas.\n\nPor fim, a transação exibe uma mensagem de log informando que as sugestões de locais para eventos foram publicadas.\nimport MaioriaGanha from 0x01\n\ntransaction {\n    prepare(admin: AuthAccount) {\n\n        let adminRef = admin.borrow<&MaioriaGanha.Administrar>(from: /storage/CalcularVotos)!\n\n        adminRef.inicializePropostas(\n            [\"Rio de Janeiro\", \"Sao Paulo\",\"Floripa\" ]\n        )\n\n        log(\"Sugestoes de Locais para Eventos Publicada!\")\n    }\n}\nAgora veremos um contrato de uma transação que permite a um eleitor emitir um voto em uma das propostas disponíveis em um contrato MaioriaGanha\n. Quando a transação é executada, ela solicita ao administrador e ao eleitor que forneçam suas credenciais de autenticação.\n\nEm seguida, a transação obtém uma referência para o recurso Administrar do contrato MaioriaGanha e chama a função emitirVoto nesse recurso. A função emitirVoto cria uma nova instância do recurso Voto e retorna uma referência para ela.\n\nEm seguida, a transação salva a instância do recurso Voto na storage do eleitor e exibe uma mensagem de log informando que o acesso foi concedido.\nimport MaioriaGanha from 0x01\n\ntransaction {\n    prepare(admin: AuthAccount, eleitor: AuthAccount) {\n\n        let adminRef = admin.borrow<&MaioriaGanha.Administrar>(from: /storage/CalcularVotos)!\n\n        let voto <- adminRef.emitirVoto()\n\n        eleitor.save<@MaioriaGanha.Voto>(<-voto, to: /storage/Voto)\n\n        log(\"Acesso Concedido\")\n    }\n}\nAgora uma transação que permite a um eleitor emitir um voto em uma das propostas disponíveis em um contrato MaioriaGanha. Quando a transação é executada, ela solicita ao eleitor que forneça suas credenciais de autenticação e, em seguida, tenta carregar uma instância do recurso Voto da storage do eleitor.\n\nSe uma instância do recurso Voto for encontrada na storage do eleitor, a transação chama a função vote nessa instância, passando o valor 0 como argumento. Isso marca a primeira proposta da lista como a escolha do eleitor.\n\nEm seguida, a transação chama a função processar do contrato MaioriaGanha, passando a instância do recurso Voto como argumento. Isso adiciona o voto do eleitor à contagem de votos para a primeira proposta.\n\nPor fim, a transação exibe uma mensagem de log informando que o voto foi computado.\nimport MaioriaGanha from 0x01\n\ntransaction {\n    prepare(eleitor: AuthAccount) {\n\n        let voto <- eleitor.load<@MaioriaGanha.Voto>(from: /storage/Voto)!\n\n        voto.vote(propostas: 0)\n\n        MaioriaGanha.processar(voto: <-voto)\n\n        log(\"Voto computado\")\n    }\n}\nPor fim, no script template.\n\nQuando a função é chamada, ela exibe os valores da primeira, segunda e terceira propostas na lista de propostas, seguidos dos respectivos valores de votos.\n\nA função usa os índices 0, 1 e 2 para acessar os elementos da lista de propostas e do dicionário de votos, respectivamente. Isso significa que ela exibirá a primeira proposta da lista, seguida do número de votos para essa proposta, depois a segunda proposta da lista e o número de votos para ela, e assim por diante.\nimport MaioriaGanha from 0x01\n\npub fun main() {\n    log(MaioriaGanha.propostas[0])\n    log(MaioriaGanha.votos[0])\n\n    log(MaioriaGanha.propostas[1])\n    log(MaioriaGanha.votos[1])\n\n    log(MaioriaGanha.propostas[2])\n    log(MaioriaGanha.votos[2])\n}\nTry out this Playground project"},"site":{"__metadata":{"id":"content/data/config.json","source":"sourcebit-source-filesystem","sourceName":"data","sourcePath":"/Users/coflow/Desktop/digifi_ei/content/data","relSourcePath":"config.json","relProjectPath":"content/data/config.json"},"type":"Config","header":{"headerVariant":"variant-b","isSticky":true,"primaryColors":"colors-b","secondaryColors":"colors-d","isTitleVisible":false,"primaryLinks":[{"type":"Link","label":"Home","altText":"Inicio","url":"/","showIcon":false,"icon":"arrowRight","iconPosition":"right","elementId":""},{"type":"DropdownLink","label":"About","dropdownLinks":[{"type":"Link","label":"Curso Cadence","url":"/curso","altText":"Curso Cadence"},{"type":"Link","label":"Blog","altText":"Blog","url":"/blog","showIcon":true,"icon":"arrowRight","iconPosition":"right","elementId":""},{"type":"Link","label":"Learn More","altText":"","url":"/curso","showIcon":false,"icon":"arrowRight","iconPosition":"right","elementId":""}]},{"type":"DropdownLink","label":"Volunteers","dropdownLinks":[{"type":"Link","label":"2023","altText":"Link to 2023 team's page","url":"/registro/2023","showIcon":false,"icon":"arrowRight","iconPosition":"right","elementId":""},{"type":"Link","label":"Advocates","altText":"Advocates","url":"https://flow.coflow.com.br/flow-brasil-embaixador-aprendiz/","showIcon":true,"icon":"arrowRight","iconPosition":"right","elementId":""}]},{"type":"DropdownLink","label":"Partnerships","altText":"Parcerias","dropdownLinks":[{"type":"Link","label":"GeekHunter","altText":"Recurtamento e Seleção","url":"/2023/janeiro/parcerias/geekhunter/","showIcon":true,"icon":"arrowRight","iconPosition":"left","elementId":""},{"type":"Link","label":"News","altText":"Novidades","url":"/2023/janeiro/news","showIcon":true,"icon":"arrowRight","iconPosition":"right","elementId":""}]},{"type":"Link","label":"Blog ","altText":"Blog","url":"/blog","showIcon":true,"icon":"arrowRightCircle","iconPosition":"left","elementId":""}],"secondaryLinks":[{"type":"Button","label":"Join Discord","altText":"Entrar no Discord","style":"secondary","url":"https://discord.com/invite/hT8EpC5mUN","showIcon":true,"icon":"cart","iconPosition":"right","elementId":""}],"styles":{"self":{"width":"wide","padding":["pl-5","pt-5","pb-5","pr-5"]}},"logo":{"type":"ImageBlock","url":"/images/padrao/flow-coflow-logo.png","altText":"CoFlow Logo","caption":"CoFlow","width":114,"height":48,"elementId":""},"title":"CoFlow"},"footer":{"variant":"variant-b","colors":"colors-b","contacts":{"addressAltText":"Our address"},"copyrightText":"CoFlow","primaryLinks":[{"type":"Link","label":"Home","url":"/","altText":"Home"},{"type":"Link","label":"Contact Us","altText":"Contact Us","url":"https://wa.me/5521997806363?text=Ol%C3%A1","showIcon":false,"icon":"arrowRight","iconPosition":"right","elementId":""},{"type":"Link","label":"CURSO CADENCE","altText":"CURSO CADENCE","url":"/curso","showIcon":false,"icon":"arrowRight","iconPosition":"right","elementId":""},{"type":"Link","label":"TERMO DE USO","altText":"TERMO DE USO","url":"/termo-de-uso","showIcon":false,"icon":"arrowRight","iconPosition":"right","elementId":""},{"type":"Link","label":"POLÍTICA DE PRIVACIDADE","altText":"POLÍTICA DE PRIVACIDADE","url":"/politica-de-privacidade","showIcon":false,"icon":"arrowRight","iconPosition":"right","elementId":""}],"socialLinks":[{"type":"Social","label":"Email","altText":"","url":"mailto:diegofornalha@gmail.com","icon":"mail","style":"link","elementId":""},{"type":"Social","altText":"Instagram","label":"Instagram","url":"http://www.instagram.com/diegofornalha","icon":"instagram"},{"type":"Social","altText":"Linkedin","label":"Linkedin","url":"https://www.github.com/diegofornalha","icon":"github"},{"type":"Social","label":"Youtube","altText":"Youtube","icon":"youtube","style":"link","elementId":"","url":"https://www.youtube.com/diegofornalha"},{"type":"Social","altText":"Twitter","label":"Twitter","url":"https://twitter.com/diegofornalha","icon":"twitter"},{"type":"Social","label":"Linkedin","altText":"Linkedin","url":"https://linkedin.com/in/diegofornalha","icon":"linkedin","style":"link","elementId":""}],"styles":{"self":{"width":"narrow"}},"logo":{"type":"ImageBlock","url":"/images/padrao/flow-coflow-logo.png","altText":"CoFlow Logo","caption":"CoFlow Logo","width":114,"height":48,"elementId":""}},"defaultMetaTags":[{"type":"MetaTag","property":"og:title","content":"CoFlow"}],"titleSuffix":"Coflow","env":{}}},"__N_SSG":true}