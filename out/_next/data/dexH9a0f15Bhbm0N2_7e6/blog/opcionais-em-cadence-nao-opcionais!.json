{"pageProps":{"page":{"__metadata":{"id":"content/pages/blog/opcionais-em-cadence-nao-opcionais!.md","source":"sourcebit-source-filesystem","sourceName":"pages","sourcePath":"/Users/coflow/Desktop/digifi_ei/content/pages","relSourcePath":"blog/opcionais-em-cadence-nao-opcionais!.md","relProjectPath":"content/pages/blog/opcionais-em-cadence-nao-opcionais!.md","urlPath":"/blog/opcionais-em-cadence-nao-opcionais!","pageCssClasses":["page-blog","page-blog-opcionais-em-cadence-nao-opcionais!"]},"layout":"PostLayout","metaTitle":"Opcionais em Cadence? N√£o opcionais!","addTitleSuffix":true,"metaTags":[],"title":"Opcionais em Cadence? N√£o opcionais!","colors":"colors-d","date":"2022-12-20","excerpt":"Os opcionais s√£o uma forma de lidar com vari√°veis que podem ou n√£o ter um valor. Eles permitem que voc√™ gerencie situa√ß√µes de erro e outras circunst√¢ncias de maneira mais elegante, tornando expl√≠cito o estado vazio ou n√£o dispon√≠vel de uma vari√°vel. Para declarar um opcional, basta adicionar um s√≠mbolo de interroga√ß√£o (?) ap√≥s a declara√ß√£o da vari√°vel. Por exemplo, se voc√™ quiser declarar uma vari√°vel chamada \"nome\" como opcional, pode escrever \"nome var: String?\" Isso diz que o valor de \"nome\" pode ser do tipo String ou pode ser nil (ou seja, n√£o ter um valor). Nil √© usado para representar a aus√™ncia de um valor e pode ser usado de maneira semelhante ao valor null em outras linguagens. Os opcionais s√£o √∫teis porque permitem que o programador fa√ßa uma distin√ß√£o expl√≠cita entre vari√°veis que t√™m valores e aquelas que n√£o t√™m, o que pode ajudar a evitar erros no c√≥digo e a torn√°-lo mais leg√≠vel.","featuredImage":{"type":"ImageBlock","url":"/images/capas/Opcionais em Cadence diegofornalha.png","altText":"Opcionais em Cadence? N√£o opcionais!","caption":"Os opcionais s√£o uma forma de lidar com vari√°veis que podem ou n√£o ter um valor. Eles permitem que voc√™ gerencie situa√ß√µes de erro e outras circunst√¢ncias de maneira mais elegante, tornando expl√≠cito o estado vazio ou n√£o dispon√≠vel de uma vari√°vel. Para declarar um opcional, basta adicionar um s√≠mbolo de interroga√ß√£o (?) ap√≥s a declara√ß√£o da vari√°vel. Por exemplo, se voc√™ quiser declarar uma vari√°vel chamada \"nome\" como opcional, pode escrever \"nome var: String?\" Isso diz que o valor de \"nome\" pode ser do tipo String ou pode ser nil (ou seja, n√£o ter um valor). Nil √© usado para representar a aus√™ncia de um valor e pode ser usado de maneira semelhante ao valor null em outras linguagens. Os opcionais s√£o √∫teis porque permitem que o programador fa√ßa uma distin√ß√£o expl√≠cita entre vari√°veis que t√™m valores e aquelas que n√£o t√™m, o que pode ajudar a evitar erros no c√≥digo e a torn√°-lo mais leg√≠vel.","width":800,"height":450},"media":{"type":"ImageBlock","url":"/images/capas/Opcionais em Cadence diegofornalha.png","altText":"Opcionais em Cadence? N√£o opcionais!","caption":"Os opcionais s√£o uma forma de lidar com vari√°veis que podem ou n√£o ter um valor. Eles permitem que voc√™ gerencie situa√ß√µes de erro e outras circunst√¢ncias de maneira mais elegante, tornando expl√≠cito o estado vazio ou n√£o dispon√≠vel de uma vari√°vel. Para declarar um opcional, basta adicionar um s√≠mbolo de interroga√ß√£o (?) ap√≥s a declara√ß√£o da vari√°vel. Por exemplo, se voc√™ quiser declarar uma vari√°vel chamada \"nome\" como opcional, pode escrever \"nome var: String?\" Isso diz que o valor de \"nome\" pode ser do tipo String ou pode ser nil (ou seja, n√£o ter um valor). Nil √© usado para representar a aus√™ncia de um valor e pode ser usado de maneira semelhante ao valor null em outras linguagens. Os opcionais s√£o √∫teis porque permitem que o programador fa√ßa uma distin√ß√£o expl√≠cita entre vari√°veis que t√™m valores e aquelas que n√£o t√™m, o que pode ajudar a evitar erros no c√≥digo e a torn√°-lo mais leg√≠vel.","width":800,"height":850},"bottomSections":[],"metaDescription":"Opcionais em Cadence? N√£o opcionais!","socialImage":"/images/capas/Opcionais em Cadence diegofornalha.png","author":null,"markdown_content":"\n\n![https://miro.medium.com/max/700/1\\*pccxbH9FmN9zxWG5dyvuLA.png](https://miro.medium.com/max/700/1\\*pccxbH9FmN9zxWG5dyvuLA.png)\n\n# **O que s√£o opcionais?**\n\nOpcionais s√£o uma forma de lidar com vari√°veis que podem ou n√£o ter um valor. Eles permitem que gerencie situa√ß√µes de erro e outras circunst√¢ncias de forma mais elegante, tornando expl√≠cito o estado vazio ou n√£o dispon√≠vel de uma vari√°vel.\n\nPara declarar basta adicionar um s√≠mbolo de interroga√ß√£o `` ap√≥s a declara√ß√£o da vari√°vel.\n\nPor exemplo:\n\n```\nnome var: String?\n```\n\nIsso diz que o valor de `` pode ser do tipo ``, ou pode ser ``, ou seja, n√£o ter um valor.\n\n`` tecnicamente j√° √© um valor. Por√©m √© um valor usado para representar o valor nulo ou valor ausente de uma vari√°vel.\n\nIsso Mesmo, `` √© usado para representar a aus√™ncia de um valor. Ele pode ser usado de maneira semelhante ao valor null.\n\nPor exemplo, imagine que voc√™ tem uma vari√°vel chamada `` que pode ou n√£o conter um valor. Se voc√™ declarar nome como opcionais, poder√° atribuir a ela um valor normalmente, como nome = \"Diego\", mas tamb√©m poder√° atribuir o valor `` indicando que ela **ainda** n√£o tem um valor ou que *n√£o est√° dispon√≠vel*.\n\nIsso √© √∫til porque permite que o programador fa√ßa uma distin√ß√£o de forma f√°cil.\n\nIsso pode ajudar a evitar erros no c√≥digo e a tornar o c√≥digo mais leg√≠vel. Com os opcionais fica mais f√°cil de lidar com ``.\n\nVoc√™ declara opcionais usando o¬†`?`¬†ap√≥s a declara√ß√£o vari√°vel regular.\n\n## **Por que eu gostaria de dizer que algo √©¬†`nil`?**\n\nOs opcionais permite a capacidade de lidar com casos de erro e situa√ß√µes semelhantes.\n\nO objetivo principal √© tornar expl√≠cito o **estado indispon√≠vel** / **vazio** / nada de uma vari√°vel, e ainda mais, torn√°-lo expl√≠cito quando algo nunca pode ser indispon√≠vel / **vazio**.\n\nNos idiomas que permitem que qualquer vari√°vel seja nula, geralmente n√£o est√° claro se a vari√°vel pode ser nula no local espec√≠fico do c√≥digo, o que leva a dois problemas:\n\n*   O caso nulo n√£o √© tratado pelo programador e, em seguida, h√° um valor nulo, causando uma refer√™ncia nula, ou seja, falha;\n*   Ou o caso nulo √© considerado pelo programador e eles adicionam verifica√ß√µes defensivas para lidar com o suposto caso nulo, embora nunca ocorra, causando sobrecarga desnecess√°ria.\n\nAqui est√° um exemplo:\n\nDigamos que estamos usando o campo que eu defini acima em um contrato, mas n√£o como opcional:\n\n```\ncontrato de pub NameHolder {\n    nome do pub var: String\n}\n```\n\nSe o valor ainda n√£o foi definido, mas algu√©m deseja l√™-lo, como comunicamos que ele n√£o foi definido? Poder√≠amos simplesmente retornar uma sequ√™ncia vazia, mas isso √© efetivamente o mesmo que retornar qualquer sequ√™ncia n√£o vazia, portanto, o leitor pode n√£o saber que uma sequ√™ncia vazia significa que ainda n√£o foi definida e cometer um erro ao supor que est√° tudo bem.\n\nSe tornarmos o campo opcional:\n\n```\ncontrato de pub NameHolder {\n    nome do pub var: String?\n}\n```\n\nEnt√£o fica muito claro para o leitor. Se eles tentarem ler¬†`name`¬†e eles recebem¬†`nil`¬†de volta, eles podem lidar facilmente com o erro e fazer o que precisarem nesse caso.\n\nEm Cadence, √© necess√°rio inicializar os campos em tipos compostos, para que esse problema exato n√£o ocorra com muita frequ√™ncia, mas voc√™ ver√° casos semelhantes que s√£o um pouco mais complexos.\n\nPor exemplo, os valores em dicion√°rios s√£o todos opcionais. Voc√™ pode inicializar um dicion√°rio para ficar vazio assim:\n\n```\nlet lastNameDictionary: { String: String } = { \"Josh\": \"Hannan\" }\n```\n\nPor√©m, como existe um n√∫mero infinito poss√≠vel de pares de valores-chave, se voc√™ tentar acessar qualquer um deles, ele retornar√° um opcional, mesmo que o valor exista para a chave que voc√™ fornece!\n\n```\nlet lastNameDictionary: { String: String } = { \"Josh\": \"Hannan\" }// Ambos causam um erro:\n// Inv√°lido: tipos incompat√≠veis. esperado `String`, conseguiu `String?\ndeixe existirNome: String = lastNameDictionary [ \"Josh\" ]\nlet newName: String = lastNameDictionary [ \"Kayla\" ]\n```\n\n## **Como eu lido com opcionais?**\n\nSe deixados por conta pr√≥pria, os opcionais podem ser um punhado!\n\n![https://miro.medium.com/max/700/1\\*nSwqKtEWqWv5wAjEk6Lh3A.jpeg](https://miro.medium.com/max/700/1\\*nSwqKtEWqWv5wAjEk6Lh3A.jpeg)\n\nComo tiramos voc√™ de l√°??? Acho que temos que desembrulhar a caixa!\n\nValores de vari√°veis opcionais ainda s√£o considerados agrupados no opcional. ‚Äú Embrulhado ‚Äù √© um termo que significa que ainda n√£o sabemos se o valor √© ou n√£o¬†`nil`¬†ou n√£o. Se voc√™ tentar executar uma opera√ß√£o normal que normalmente pode executar com o tipo que est√° usando, ela falhar√° no verificador de tipo Cadence:\n\n```\nlet x: Int? = 2// Inv√°lido: n√£o √© poss√≠vel aplicar opera√ß√£o bin√°ria + aos tipos: `Int?`, `Int`\ny = x + 2\n```\n\nEmbora ambos os argumentos especifiquem alguma forma de¬†`Int`¬†,¬†`x`ainda est√° encerrado, ent√£o o programa n√£o sabe se √©¬†`nil`¬†ou n√£o. N√£o nos permitir√° executar uma opera√ß√£o matem√°tica com ele, porque voc√™ n√£o pode adicionar¬†`nil`¬†e um n√∫mero! Isso explodiria o universo!!!!\n\nVoc√™ precisa desembrulhar o valor do opcional primeiro e executar a opera√ß√£o.\n\nIsso tamb√©m se aplica a tipos compostos. Se voc√™ possui um tipo composto opcional, √© necess√°rio desembrulhar o opcional antes de poder chamar qualquer um de seus m√©todos ou acessar qualquer um de seus campos.\n\nAqui est√° um exemplo simples:\n\n```\ncontrato de pub HelloWorld {\n    recurso de pub OpcionalOl√° {\n        pub fun hello ( ): Corda {\n            retornar \"ol√°\"\n        }\n    }    access ( self ) let helloResource: @OptionalHello?    init ( ) {\n        self.helloResource < - crie OpcionalOl√° ( )\n    }    // Fun√ß√£o p√∫blica que retorna nossa sauda√ß√£o amig√°vel!\n    pub fun hello ( ): Corda {\n        retorne self.helloResource.hello ( )\n    }\n}\n```\n\nPortanto, se voc√™ vir um erro como este:\n\n```\nvalor do tipo `HelloWorld.OptionalHello?`n√£o tem membro `ol√°`. membro desconhecido\n```\n\nProcure o¬†`?`¬†no final do nome do tipo. O objeto geralmente ainda √© opcional e precisa ser desembrulhado antes de chamar o¬†`hello`¬†m√©todo. ( melhores mensagens de erro tamb√©m est√£o chegando no futuro ) üòÉ\n\n# **Opcionais de desembrulho**\n\nExistem v√°rias maneiras diferentes de desembrulhar opcionais, e todos eles t√™m comportamento diferente e s√£o usados para diferentes casos de uso.\n\n## **Operador de coalesc√™ncia nula**\n\nO¬†[operador de coalesc√™ncia nula](https://docs.onflow.org/cadence/language/values-and-types/#nil-coalescing-operator)¬†`??`¬†retorna o valor dentro de um opcional se ele contiver um valor ou retorna um valor alternativo especificado se o opcional n√£o tiver valor, ou seja, o valor opcional √©¬†`nil`.\n\nSe o lado esquerdo n√£o estiver nulo, o lado direito n√£o ser√° avaliado.\n\n[Consulte os documentos da Cadence para obter mais informa√ß√µes](https://docs.onflow.org/cadence/language/values-and-types#nil-coalescing-operator)¬†sobre o operador de coalesc√™ncia nula.\n\nVoc√™ provavelmente ver√° isso muito usado ao pedir refer√™ncias a recursos e recursos. √â poss√≠vel colocar qualquer c√≥digo no lado direito do¬†`??`¬†portanto, se um empr√©stimo falhar, ele retornar√° um opcional que seja¬†`nil`¬†, mas em muitos casos, se um empr√©stimo falhar, a transa√ß√£o dever√° falhar. O operador de coalesc√™ncia nula nos permite entrar em p√¢nico e imprimir uma mensagem de erro para que o estado seja revertido e o chamador saiba exatamente o que deu errado.\n\nPor exemplo, quando emprestamos uma refer√™ncia √† conta¬†`FlowToken`¬†receptor, geralmente usamos isso:\n\n```\n// Obtenha uma refer√™ncia ao Receptor do destinat√°rio\ndeixe receiverCap = obter conta ( para ) .getCapability ( / public / flowTokenReceiver )\n\ndeixe o receiverRef = receiverCap.borrow < & { FungibleToken.Receiver } > ( )\n    ?? panic ( \"N√£o foi poss√≠vel emprestar refer√™ncia ao receptor\" )\n```\n\nSe¬†`borrow`¬†obt√©m sucesso, retorna uma refer√™ncia v√°lida. Se falhar, ele retornar√°¬†`nil`¬†. Portanto, o tipo do valor de retorno √©¬†`&{FungibleToken.Receiver}?`¬†e precisamos desembrulh√°-lo antes que possamos us√°-lo.\n\n## **Invadir For√ßa**\n\nOutra maneira mais sucinta de desembrulhar um valor opcional √© usar o operador de desbaste de for√ßa (`!`¬†). O desembrulho de for√ßa obter√° o valor do opcional, se existir, ou entrar√° em p√¢nico e abortar√° se n√£o existir.\n\n![https://miro.medium.com/max/700/1\\*QL8nrzSr7sn8M53dkgtT8Q.png](https://miro.medium.com/max/700/1\\*QL8nrzSr7sn8M53dkgtT8Q.png)\n\nEste opcional n√£o deseja ser desembrulhado\n\n```\ndeixe um: Int? = 3\nlet b: Int = a!   // Ter√° sucesso e retornar√° 3let c: Int? = nada\nlet d: Int = c!   // Entrar√° em p√¢nico e abortar√° em tempo de execu√ß√£o\n```\n\n[Consulte os documentos da Cadence para obter mais informa√ß√µes e exemplos de for√ßa-desembrulho.](https://docs.onflow.org/cadence/language/values-and-types/#force-unwrap-)\n\nSe um force-unwrap falhar, ele imprimir√° apenas uma mensagem de erro gen√©rica sobre falha ao tentar for√ßar o desembrulho. Por esse motivo, voc√™ deve ter muito cuidado com o local de uso do force-unwrap, porque se falhar, ser√° muito mais dif√≠cil determinar de onde vem o erro.\n\nVoc√™ deve usar apenas o operador de desbloqueio de for√ßa em locais onde tenha certeza absoluta de que o valor n√£o ser√°¬†`nil`¬†. Por exemplo, se voc√™ j√° verificou que n√£o est√° em uma condi√ß√£o pr√©via, sabe que quando for√ßar a quebra, estar√° seguro.\n\n## **Encaderna√ß√£o opcional**\n\nOutra maneira poderosa de desembrulhar e manipular opcionais √© atrav√©s de encaderna√ß√£o opcional, um m√©todo que permite incluir o desembrulho em um condicional que executa diferentes blocos de c√≥digo, dependendo de como o desembrulho ocorreu.\n\nO bloqueio opcional √© uma variante do if-statement que executa condicionalmente um corpo de c√≥digo se um opcional for¬†`nil`¬†ou n√£o.\n\n[Veja os documentos de cad√™ncia para exemplos de encaderna√ß√£o opcional](https://docs.onflow.org/cadence/language/control-flow/#optional-binding)\n\nA liga√ß√£o opcional √© uma maneira completa de lidar com diferentes casos de opcionais, pois oferece a maior flexibilidade com o comportamento do seu programa.\n\nSe¬†`nil`¬†√© um valor potencial esperado para um opcional em seu programa e voc√™ tem muitas opera√ß√µes que precisa executar nesse caso, ent√£o a liga√ß√£o opcional √© o caminho a seguir.\n\n## **Encadeamento opcional**\n\nPor √∫ltimo, mas n√£o menos importante, temos um encadeamento opcional. √Äs vezes, existem tipos compostos opcionais, porque s√£o armazenados em um dicion√°rio ou retornados como opcionais de uma fun√ß√£o que os recupera. Se voc√™ deseja chamar uma fun√ß√£o em um tipo composto opcional, pode usar o encadeamento opcional para chamar ‚Äú opcionalmente ‚Äù essa fun√ß√£o. Se o objeto que voc√™ est√° chamando √©¬†`nil`¬†, ele simplesmente n√£o executa nenhuma fun√ß√£o e segue em frente e retorna¬†`nil`¬†.\n\n[Consulte os documentos da Cadence para obter mais informa√ß√µes e exemplos.](https://docs.onflow.org/cadence/language/composite-types#accessing-fields-and-functions-of-composite-types-using-optional-chaining)\n\n# **Conclus√£o**\n\nOs opcionais s√£o uma caracter√≠stica importante de muitos idiomas e aprender a us√°-los adequadamente √© importante para escrever c√≥digo limpo e seguro, para que voc√™ entenda bem!\n\nEspero que este post tenha sido informativo e √∫til!\n\n![https://miro.medium.com/max/700/1\\*Bt7h4pwGTISjTwHrzTjypw.png](https://miro.medium.com/max/700/1\\*Bt7h4pwGTISjTwHrzTjypw.png)\n\nInspirado no Artigo Original em ingl√™s: https://joshuahannan.medium.com/optionals-in-cadence-not-optional-fb39bb4b0081\n"},"site":{"__metadata":{"id":"content/data/config.json","source":"sourcebit-source-filesystem","sourceName":"data","sourcePath":"/Users/coflow/Desktop/digifi_ei/content/data","relSourcePath":"config.json","relProjectPath":"content/data/config.json"},"type":"Config","header":{"headerVariant":"variant-b","isSticky":true,"primaryColors":"colors-b","secondaryColors":"colors-d","isTitleVisible":false,"primaryLinks":[{"type":"Link","label":"Home","altText":"Inicio","url":"/","showIcon":false,"icon":"arrowRight","iconPosition":"right","elementId":""},{"type":"DropdownLink","label":"About","dropdownLinks":[{"type":"Link","label":"Curso Cadence","url":"/curso","altText":"Curso Cadence"},{"type":"Link","label":"Blog","altText":"Blog","url":"/blog","showIcon":true,"icon":"arrowRight","iconPosition":"right","elementId":""},{"type":"Link","label":"Learn More","altText":"","url":"/curso","showIcon":false,"icon":"arrowRight","iconPosition":"right","elementId":""}]},{"type":"DropdownLink","label":"Volunteers","dropdownLinks":[{"type":"Link","label":"2023","altText":"Link to 2023 team's page","url":"/registro/2023","showIcon":false,"icon":"arrowRight","iconPosition":"right","elementId":""},{"type":"Link","label":"Advocates","altText":"Advocates","url":"https://flow.coflow.com.br/flow-brasil-embaixador-aprendiz/","showIcon":true,"icon":"arrowRight","iconPosition":"right","elementId":""}]},{"type":"DropdownLink","label":"Partnerships","altText":"Parcerias","dropdownLinks":[{"type":"Link","label":"GeekHunter","altText":"Recurtamento e Sele√ß√£o","url":"/2023/janeiro/parcerias/geekhunter/","showIcon":true,"icon":"arrowRight","iconPosition":"left","elementId":""},{"type":"Link","label":"News","altText":"Novidades","url":"/2023/janeiro/news","showIcon":true,"icon":"arrowRight","iconPosition":"right","elementId":""}]},{"type":"Link","label":"Blog ","altText":"Blog","url":"/blog","showIcon":true,"icon":"arrowRightCircle","iconPosition":"left","elementId":""}],"secondaryLinks":[{"type":"Button","label":"Join Discord","altText":"Entrar no Discord","style":"secondary","url":"https://discord.com/invite/hT8EpC5mUN","showIcon":true,"icon":"cart","iconPosition":"right","elementId":""}],"styles":{"self":{"width":"wide","padding":["pl-5","pt-5","pb-5","pr-5"]}},"logo":{"type":"ImageBlock","url":"/images/padrao/flow-coflow-logo.png","altText":"CoFlow Logo","caption":"CoFlow","width":114,"height":48,"elementId":""},"title":"CoFlow"},"footer":{"variant":"variant-b","colors":"colors-b","contacts":{"addressAltText":"Our address"},"copyrightText":"CoFlow","primaryLinks":[{"type":"Link","label":"Home","url":"/","altText":"Home"},{"type":"Link","label":"Contact Us","altText":"Contact Us","url":"https://wa.me/5521997806363?text=Ol%C3%A1","showIcon":false,"icon":"arrowRight","iconPosition":"right","elementId":""},{"type":"Link","label":"CURSO CADENCE","altText":"CURSO CADENCE","url":"/curso","showIcon":false,"icon":"arrowRight","iconPosition":"right","elementId":""},{"type":"Link","label":"TERMO DE USO","altText":"TERMO DE USO","url":"/termo-de-uso","showIcon":false,"icon":"arrowRight","iconPosition":"right","elementId":""},{"type":"Link","label":"POL√çTICA DE PRIVACIDADE","altText":"POL√çTICA DE PRIVACIDADE","url":"/politica-de-privacidade","showIcon":false,"icon":"arrowRight","iconPosition":"right","elementId":""}],"socialLinks":[{"type":"Social","label":"Email","altText":"","url":"mailto:diegofornalha@gmail.com","icon":"mail","style":"link","elementId":""},{"type":"Social","altText":"Instagram","label":"Instagram","url":"http://www.instagram.com/diegofornalha","icon":"instagram"},{"type":"Social","altText":"Linkedin","label":"Linkedin","url":"https://www.github.com/diegofornalha","icon":"github"},{"type":"Social","label":"Youtube","altText":"Youtube","icon":"youtube","style":"link","elementId":"","url":"https://www.youtube.com/diegofornalha"},{"type":"Social","altText":"Twitter","label":"Twitter","url":"https://twitter.com/diegofornalha","icon":"twitter"},{"type":"Social","label":"Linkedin","altText":"Linkedin","url":"https://linkedin.com/in/diegofornalha","icon":"linkedin","style":"link","elementId":""}],"styles":{"self":{"width":"narrow"}},"logo":{"type":"ImageBlock","url":"/images/padrao/flow-coflow-logo.png","altText":"CoFlow Logo","caption":"CoFlow Logo","width":114,"height":48,"elementId":""}},"defaultMetaTags":[{"type":"MetaTag","property":"og:title","content":"CoFlow"}],"titleSuffix":"Coflow","env":{}}},"__N_SSG":true}