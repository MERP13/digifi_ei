{"pageProps":{"page":{"__metadata":{"id":"content/pages/blog/opcionais-em-cadence-nao-opcionais!.md","source":"sourcebit-source-filesystem","sourceName":"pages","sourcePath":"/Users/coflow/Desktop/digifi_ei/content/pages","relSourcePath":"blog/opcionais-em-cadence-nao-opcionais!.md","relProjectPath":"content/pages/blog/opcionais-em-cadence-nao-opcionais!.md","urlPath":"/blog/opcionais-em-cadence-nao-opcionais!","pageCssClasses":["page-blog","page-blog-opcionais-em-cadence-nao-opcionais!"]},"layout":"PostLayout","metaTitle":"Opcionais em Cadence? Não opcionais!","addTitleSuffix":true,"metaTags":[],"title":"Opcionais em Cadence? Não opcionais!","colors":"colors-d","date":"2022-12-20","excerpt":"Os opcionais são uma forma de lidar com variáveis que podem ou não ter um valor. Eles permitem que você gerencie situações de erro e outras circunstâncias de maneira mais elegante, tornando explícito o estado vazio ou não disponível de uma variável. Para declarar um opcional, basta adicionar um símbolo de interrogação (?) após a declaração da variável. Por exemplo, se você quiser declarar uma variável chamada \"nome\" como opcional, pode escrever \"nome var: String?\" Isso diz que o valor de \"nome\" pode ser do tipo String ou pode ser nil (ou seja, não ter um valor). Nil é usado para representar a ausência de um valor e pode ser usado de maneira semelhante ao valor null em outras linguagens. Os opcionais são úteis porque permitem que o programador faça uma distinção explícita entre variáveis que têm valores e aquelas que não têm, o que pode ajudar a evitar erros no código e a torná-lo mais legível.","featuredImage":{"type":"ImageBlock","url":"/images/capas/Opcionais em Cadence diegofornalha.png","altText":"Opcionais em Cadence? Não opcionais!","caption":"Os opcionais são uma forma de lidar com variáveis que podem ou não ter um valor. Eles permitem que você gerencie situações de erro e outras circunstâncias de maneira mais elegante, tornando explícito o estado vazio ou não disponível de uma variável. Para declarar um opcional, basta adicionar um símbolo de interrogação (?) após a declaração da variável. Por exemplo, se você quiser declarar uma variável chamada \"nome\" como opcional, pode escrever \"nome var: String?\" Isso diz que o valor de \"nome\" pode ser do tipo String ou pode ser nil (ou seja, não ter um valor). Nil é usado para representar a ausência de um valor e pode ser usado de maneira semelhante ao valor null em outras linguagens. Os opcionais são úteis porque permitem que o programador faça uma distinção explícita entre variáveis que têm valores e aquelas que não têm, o que pode ajudar a evitar erros no código e a torná-lo mais legível.","width":800,"height":450},"media":{"type":"ImageBlock","url":"/images/capas/Opcionais em Cadence diegofornalha.png","altText":"Opcionais em Cadence? Não opcionais!","caption":"Os opcionais são uma forma de lidar com variáveis que podem ou não ter um valor. Eles permitem que você gerencie situações de erro e outras circunstâncias de maneira mais elegante, tornando explícito o estado vazio ou não disponível de uma variável. Para declarar um opcional, basta adicionar um símbolo de interrogação (?) após a declaração da variável. Por exemplo, se você quiser declarar uma variável chamada \"nome\" como opcional, pode escrever \"nome var: String?\" Isso diz que o valor de \"nome\" pode ser do tipo String ou pode ser nil (ou seja, não ter um valor). Nil é usado para representar a ausência de um valor e pode ser usado de maneira semelhante ao valor null em outras linguagens. Os opcionais são úteis porque permitem que o programador faça uma distinção explícita entre variáveis que têm valores e aquelas que não têm, o que pode ajudar a evitar erros no código e a torná-lo mais legível.","width":800,"height":850},"bottomSections":[],"metaDescription":"Opcionais em Cadence? Não opcionais!","socialImage":"/images/capas/Opcionais em Cadence diegofornalha.png","author":null,"markdown_content":"\n\n![https://miro.medium.com/max/700/1\\*pccxbH9FmN9zxWG5dyvuLA.png](https://miro.medium.com/max/700/1\\*pccxbH9FmN9zxWG5dyvuLA.png)\n\n# **O que são opcionais?**\n\nOpcionais são uma forma de lidar com variáveis que podem ou não ter um valor. Eles permitem que gerencie situações de erro e outras circunstâncias de forma mais elegante, tornando explícito o estado vazio ou não disponível de uma variável.\n\nPara declarar basta adicionar um símbolo de interrogação `` após a declaração da variável.\n\nPor exemplo:\n\n```\nnome var: String?\n```\n\nIsso diz que o valor de `` pode ser do tipo ``, ou pode ser ``, ou seja, não ter um valor.\n\n`` tecnicamente já é um valor. Porém é um valor usado para representar o valor nulo ou valor ausente de uma variável.\n\nIsso Mesmo, `` é usado para representar a ausência de um valor. Ele pode ser usado de maneira semelhante ao valor null.\n\nPor exemplo, imagine que você tem uma variável chamada `` que pode ou não conter um valor. Se você declarar nome como opcionais, poderá atribuir a ela um valor normalmente, como nome = \"Diego\", mas também poderá atribuir o valor `` indicando que ela **ainda** não tem um valor ou que *não está disponível*.\n\nIsso é útil porque permite que o programador faça uma distinção de forma fácil.\n\nIsso pode ajudar a evitar erros no código e a tornar o código mais legível. Com os opcionais fica mais fácil de lidar com ``.\n\nVocê declara opcionais usando o `?` após a declaração variável regular.\n\n## **Por que eu gostaria de dizer que algo é `nil`?**\n\nOs opcionais permite a capacidade de lidar com casos de erro e situações semelhantes.\n\nO objetivo principal é tornar explícito o **estado indisponível** / **vazio** / nada de uma variável, e ainda mais, torná-lo explícito quando algo nunca pode ser indisponível / **vazio**.\n\nNos idiomas que permitem que qualquer variável seja nula, geralmente não está claro se a variável pode ser nula no local específico do código, o que leva a dois problemas:\n\n*   O caso nulo não é tratado pelo programador e, em seguida, há um valor nulo, causando uma referência nula, ou seja, falha;\n*   Ou o caso nulo é considerado pelo programador e eles adicionam verificações defensivas para lidar com o suposto caso nulo, embora nunca ocorra, causando sobrecarga desnecessária.\n\nAqui está um exemplo:\n\nDigamos que estamos usando o campo que eu defini acima em um contrato, mas não como opcional:\n\n```\ncontrato de pub NameHolder {\n    nome do pub var: String\n}\n```\n\nSe o valor ainda não foi definido, mas alguém deseja lê-lo, como comunicamos que ele não foi definido? Poderíamos simplesmente retornar uma sequência vazia, mas isso é efetivamente o mesmo que retornar qualquer sequência não vazia, portanto, o leitor pode não saber que uma sequência vazia significa que ainda não foi definida e cometer um erro ao supor que está tudo bem.\n\nSe tornarmos o campo opcional:\n\n```\ncontrato de pub NameHolder {\n    nome do pub var: String?\n}\n```\n\nEntão fica muito claro para o leitor. Se eles tentarem ler `name` e eles recebem `nil` de volta, eles podem lidar facilmente com o erro e fazer o que precisarem nesse caso.\n\nEm Cadence, é necessário inicializar os campos em tipos compostos, para que esse problema exato não ocorra com muita frequência, mas você verá casos semelhantes que são um pouco mais complexos.\n\nPor exemplo, os valores em dicionários são todos opcionais. Você pode inicializar um dicionário para ficar vazio assim:\n\n```\nlet lastNameDictionary: { String: String } = { \"Josh\": \"Hannan\" }\n```\n\nPorém, como existe um número infinito possível de pares de valores-chave, se você tentar acessar qualquer um deles, ele retornará um opcional, mesmo que o valor exista para a chave que você fornece!\n\n```\nlet lastNameDictionary: { String: String } = { \"Josh\": \"Hannan\" }// Ambos causam um erro:\n// Inválido: tipos incompatíveis. esperado `String`, conseguiu `String?\ndeixe existirNome: String = lastNameDictionary [ \"Josh\" ]\nlet newName: String = lastNameDictionary [ \"Kayla\" ]\n```\n\n## **Como eu lido com opcionais?**\n\nSe deixados por conta própria, os opcionais podem ser um punhado!\n\n![https://miro.medium.com/max/700/1\\*nSwqKtEWqWv5wAjEk6Lh3A.jpeg](https://miro.medium.com/max/700/1\\*nSwqKtEWqWv5wAjEk6Lh3A.jpeg)\n\nComo tiramos você de lá??? Acho que temos que desembrulhar a caixa!\n\nValores de variáveis opcionais ainda são considerados agrupados no opcional. “ Embrulhado ” é um termo que significa que ainda não sabemos se o valor é ou não `nil` ou não. Se você tentar executar uma operação normal que normalmente pode executar com o tipo que está usando, ela falhará no verificador de tipo Cadence:\n\n```\nlet x: Int? = 2// Inválido: não é possível aplicar operação binária + aos tipos: `Int?`, `Int`\ny = x + 2\n```\n\nEmbora ambos os argumentos especifiquem alguma forma de `Int` , `x`ainda está encerrado, então o programa não sabe se é `nil` ou não. Não nos permitirá executar uma operação matemática com ele, porque você não pode adicionar `nil` e um número! Isso explodiria o universo!!!!\n\nVocê precisa desembrulhar o valor do opcional primeiro e executar a operação.\n\nIsso também se aplica a tipos compostos. Se você possui um tipo composto opcional, é necessário desembrulhar o opcional antes de poder chamar qualquer um de seus métodos ou acessar qualquer um de seus campos.\n\nAqui está um exemplo simples:\n\n```\ncontrato de pub HelloWorld {\n    recurso de pub OpcionalOlá {\n        pub fun hello ( ): Corda {\n            retornar \"olá\"\n        }\n    }    access ( self ) let helloResource: @OptionalHello?    init ( ) {\n        self.helloResource < - crie OpcionalOlá ( )\n    }    // Função pública que retorna nossa saudação amigável!\n    pub fun hello ( ): Corda {\n        retorne self.helloResource.hello ( )\n    }\n}\n```\n\nPortanto, se você vir um erro como este:\n\n```\nvalor do tipo `HelloWorld.OptionalHello?`não tem membro `olá`. membro desconhecido\n```\n\nProcure o `?` no final do nome do tipo. O objeto geralmente ainda é opcional e precisa ser desembrulhado antes de chamar o `hello` método. ( melhores mensagens de erro também estão chegando no futuro ) 😃\n\n# **Opcionais de desembrulho**\n\nExistem várias maneiras diferentes de desembrulhar opcionais, e todos eles têm comportamento diferente e são usados para diferentes casos de uso.\n\n## **Operador de coalescência nula**\n\nO [operador de coalescência nula](https://docs.onflow.org/cadence/language/values-and-types/#nil-coalescing-operator) `??` retorna o valor dentro de um opcional se ele contiver um valor ou retorna um valor alternativo especificado se o opcional não tiver valor, ou seja, o valor opcional é `nil`.\n\nSe o lado esquerdo não estiver nulo, o lado direito não será avaliado.\n\n[Consulte os documentos da Cadence para obter mais informações](https://docs.onflow.org/cadence/language/values-and-types#nil-coalescing-operator) sobre o operador de coalescência nula.\n\nVocê provavelmente verá isso muito usado ao pedir referências a recursos e recursos. É possível colocar qualquer código no lado direito do `??` portanto, se um empréstimo falhar, ele retornará um opcional que seja `nil` , mas em muitos casos, se um empréstimo falhar, a transação deverá falhar. O operador de coalescência nula nos permite entrar em pânico e imprimir uma mensagem de erro para que o estado seja revertido e o chamador saiba exatamente o que deu errado.\n\nPor exemplo, quando emprestamos uma referência à conta `FlowToken` receptor, geralmente usamos isso:\n\n```\n// Obtenha uma referência ao Receptor do destinatário\ndeixe receiverCap = obter conta ( para ) .getCapability ( / public / flowTokenReceiver )\n\ndeixe o receiverRef = receiverCap.borrow < & { FungibleToken.Receiver } > ( )\n    ?? panic ( \"Não foi possível emprestar referência ao receptor\" )\n```\n\nSe `borrow` obtém sucesso, retorna uma referência válida. Se falhar, ele retornará `nil` . Portanto, o tipo do valor de retorno é `&{FungibleToken.Receiver}?` e precisamos desembrulhá-lo antes que possamos usá-lo.\n\n## **Invadir Força**\n\nOutra maneira mais sucinta de desembrulhar um valor opcional é usar o operador de desbaste de força (`!` ). O desembrulho de força obterá o valor do opcional, se existir, ou entrará em pânico e abortará se não existir.\n\n![https://miro.medium.com/max/700/1\\*QL8nrzSr7sn8M53dkgtT8Q.png](https://miro.medium.com/max/700/1\\*QL8nrzSr7sn8M53dkgtT8Q.png)\n\nEste opcional não deseja ser desembrulhado\n\n```\ndeixe um: Int? = 3\nlet b: Int = a!   // Terá sucesso e retornará 3let c: Int? = nada\nlet d: Int = c!   // Entrará em pânico e abortará em tempo de execução\n```\n\n[Consulte os documentos da Cadence para obter mais informações e exemplos de força-desembrulho.](https://docs.onflow.org/cadence/language/values-and-types/#force-unwrap-)\n\nSe um force-unwrap falhar, ele imprimirá apenas uma mensagem de erro genérica sobre falha ao tentar forçar o desembrulho. Por esse motivo, você deve ter muito cuidado com o local de uso do force-unwrap, porque se falhar, será muito mais difícil determinar de onde vem o erro.\n\nVocê deve usar apenas o operador de desbloqueio de força em locais onde tenha certeza absoluta de que o valor não será `nil` . Por exemplo, se você já verificou que não está em uma condição prévia, sabe que quando forçar a quebra, estará seguro.\n\n## **Encadernação opcional**\n\nOutra maneira poderosa de desembrulhar e manipular opcionais é através de encadernação opcional, um método que permite incluir o desembrulho em um condicional que executa diferentes blocos de código, dependendo de como o desembrulho ocorreu.\n\nO bloqueio opcional é uma variante do if-statement que executa condicionalmente um corpo de código se um opcional for `nil` ou não.\n\n[Veja os documentos de cadência para exemplos de encadernação opcional](https://docs.onflow.org/cadence/language/control-flow/#optional-binding)\n\nA ligação opcional é uma maneira completa de lidar com diferentes casos de opcionais, pois oferece a maior flexibilidade com o comportamento do seu programa.\n\nSe `nil` é um valor potencial esperado para um opcional em seu programa e você tem muitas operações que precisa executar nesse caso, então a ligação opcional é o caminho a seguir.\n\n## **Encadeamento opcional**\n\nPor último, mas não menos importante, temos um encadeamento opcional. Às vezes, existem tipos compostos opcionais, porque são armazenados em um dicionário ou retornados como opcionais de uma função que os recupera. Se você deseja chamar uma função em um tipo composto opcional, pode usar o encadeamento opcional para chamar “ opcionalmente ” essa função. Se o objeto que você está chamando é `nil` , ele simplesmente não executa nenhuma função e segue em frente e retorna `nil` .\n\n[Consulte os documentos da Cadence para obter mais informações e exemplos.](https://docs.onflow.org/cadence/language/composite-types#accessing-fields-and-functions-of-composite-types-using-optional-chaining)\n\n# **Conclusão**\n\nOs opcionais são uma característica importante de muitos idiomas e aprender a usá-los adequadamente é importante para escrever código limpo e seguro, para que você entenda bem!\n\nEspero que este post tenha sido informativo e útil!\n\n![https://miro.medium.com/max/700/1\\*Bt7h4pwGTISjTwHrzTjypw.png](https://miro.medium.com/max/700/1\\*Bt7h4pwGTISjTwHrzTjypw.png)\n\nInspirado no Artigo Original em inglês: https://joshuahannan.medium.com/optionals-in-cadence-not-optional-fb39bb4b0081\n"},"site":{"__metadata":{"id":"content/data/config.json","source":"sourcebit-source-filesystem","sourceName":"data","sourcePath":"/Users/coflow/Desktop/digifi_ei/content/data","relSourcePath":"config.json","relProjectPath":"content/data/config.json"},"type":"Config","header":{"headerVariant":"variant-b","isSticky":true,"primaryColors":"colors-b","secondaryColors":"colors-d","isTitleVisible":false,"primaryLinks":[{"type":"Link","label":"Home","altText":"Inicio","url":"/","showIcon":false,"icon":"arrowRight","iconPosition":"right","elementId":""},{"type":"DropdownLink","label":"About","dropdownLinks":[{"type":"Link","label":"Curso Cadence","url":"/curso","altText":"Curso Cadence"},{"type":"Link","label":"Blog","altText":"Blog","url":"/blog","showIcon":true,"icon":"arrowRight","iconPosition":"right","elementId":""},{"type":"Link","label":"Learn More","altText":"","url":"/curso","showIcon":false,"icon":"arrowRight","iconPosition":"right","elementId":""}]},{"type":"DropdownLink","label":"Volunteers","dropdownLinks":[{"type":"Link","label":"2023","altText":"Link to 2023 team's page","url":"/registro/2023","showIcon":false,"icon":"arrowRight","iconPosition":"right","elementId":""},{"type":"Link","label":"Advocates","altText":"Advocates","url":"https://flow.coflow.com.br/flow-brasil-embaixador-aprendiz/","showIcon":true,"icon":"arrowRight","iconPosition":"right","elementId":""}]},{"type":"DropdownLink","label":"Partnerships","altText":"Parcerias","dropdownLinks":[{"type":"Link","label":"GeekHunter","altText":"Recurtamento e Seleção","url":"/2023/janeiro/parcerias/geekhunter/","showIcon":true,"icon":"arrowRight","iconPosition":"left","elementId":""},{"type":"Link","label":"News","altText":"Novidades","url":"/2023/janeiro/news","showIcon":true,"icon":"arrowRight","iconPosition":"right","elementId":""}]},{"type":"Link","label":"Blog ","altText":"Blog","url":"/blog","showIcon":true,"icon":"arrowRightCircle","iconPosition":"left","elementId":""}],"secondaryLinks":[{"type":"Button","label":"Join Discord","altText":"Entrar no Discord","style":"secondary","url":"https://discord.com/invite/hT8EpC5mUN","showIcon":true,"icon":"cart","iconPosition":"right","elementId":""}],"styles":{"self":{"width":"wide","padding":["pl-5","pt-5","pb-5","pr-5"]}},"logo":{"type":"ImageBlock","url":"/images/padrao/flow-coflow-logo.png","altText":"CoFlow Logo","caption":"CoFlow","width":114,"height":48,"elementId":""},"title":"CoFlow"},"footer":{"variant":"variant-b","colors":"colors-b","contacts":{"addressAltText":"Our address"},"copyrightText":"CoFlow","primaryLinks":[{"type":"Link","label":"Home","url":"/","altText":"Home"},{"type":"Link","label":"Contact Us","altText":"Contact Us","url":"https://wa.me/5521997806363?text=Ol%C3%A1","showIcon":false,"icon":"arrowRight","iconPosition":"right","elementId":""},{"type":"Link","label":"CURSO CADENCE","altText":"CURSO CADENCE","url":"/curso","showIcon":false,"icon":"arrowRight","iconPosition":"right","elementId":""},{"type":"Link","label":"TERMO DE USO","altText":"TERMO DE USO","url":"/termo-de-uso","showIcon":false,"icon":"arrowRight","iconPosition":"right","elementId":""},{"type":"Link","label":"POLÍTICA DE PRIVACIDADE","altText":"POLÍTICA DE PRIVACIDADE","url":"/politica-de-privacidade","showIcon":false,"icon":"arrowRight","iconPosition":"right","elementId":""}],"socialLinks":[{"type":"Social","label":"Email","altText":"","url":"mailto:diegofornalha@gmail.com","icon":"mail","style":"link","elementId":""},{"type":"Social","altText":"Instagram","label":"Instagram","url":"http://www.instagram.com/diegofornalha","icon":"instagram"},{"type":"Social","altText":"Linkedin","label":"Linkedin","url":"https://www.github.com/diegofornalha","icon":"github"},{"type":"Social","label":"Youtube","altText":"Youtube","icon":"youtube","style":"link","elementId":"","url":"https://www.youtube.com/diegofornalha"},{"type":"Social","altText":"Twitter","label":"Twitter","url":"https://twitter.com/diegofornalha","icon":"twitter"},{"type":"Social","label":"Linkedin","altText":"Linkedin","url":"https://linkedin.com/in/diegofornalha","icon":"linkedin","style":"link","elementId":""}],"styles":{"self":{"width":"narrow"}},"logo":{"type":"ImageBlock","url":"/images/padrao/flow-coflow-logo.png","altText":"CoFlow Logo","caption":"CoFlow Logo","width":114,"height":48,"elementId":""}},"defaultMetaTags":[{"type":"MetaTag","property":"og:title","content":"CoFlow"}],"titleSuffix":"Coflow","env":{}}},"__N_SSG":true}